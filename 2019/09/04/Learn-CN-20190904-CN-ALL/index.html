<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    

    

    



    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    
    
    
    
    <title>CN-ALL | Maxwell&#39;s Blog | Think &amp; Write</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#1976D2">
    
    
    <meta name="keywords" content="Course,Computer Network">
    <meta name="description" content="[Textbook]: Computer Networking: A Top-Down Approach(7th Edition) by James F. Kurose, Keith W. Ross搜索”#解题”查看所有计算题解题方法">
<meta name="keywords" content="Course,Computer Network">
<meta property="og:type" content="article">
<meta property="og:title" content="CN-ALL">
<meta property="og:url" content="https://Maxwell-lyu.github.io/2019/09/04/Learn-CN-20190904-CN-ALL/index.html">
<meta property="og:site_name" content="Maxwell&#39;s Blog">
<meta property="og:description" content="[Textbook]: Computer Networking: A Top-Down Approach(7th Edition) by James F. Kurose, Keith W. Ross搜索”#解题”查看所有计算题解题方法">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-12-22T12:06:08.777Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CN-ALL">
<meta name="twitter:description" content="[Textbook]: Computer Networking: A Top-Down Approach(7th Edition) by James F. Kurose, Keith W. Ross搜索”#解题”查看所有计算题解题方法">
    
        <link rel="alternate" type="application/atom+xml" title="Maxwell&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    

</head>

<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.png)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Maxwell Lyu</h5>
          <a href="mailto:maxwell.lyu@foxmail.com" title="maxwell.lyu@foxmail.com" class="mail">maxwell.lyu@foxmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Index
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/friends"  >
                <i class="icon icon-lg icon-address-book"></i>
                Friends
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/Maxwell-Lyu" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://maxwell-lyu.github.io/"  >
                <i class="icon icon-lg icon-link"></i>
                Link
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">CN-ALL</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">CN-ALL</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-09-04T01:33:26.000Z" itemprop="datePublished" class="page-time">
  2019-09-04
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Chapter-1-Introduction-of-Networking"><span class="post-toc-number">1.</span> <span class="post-toc-text">Chapter 1: Introduction of Networking</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#What’s-the-Internet"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">What’s the Internet</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Building-Internet"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">Building Internet</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Internet-History"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">Internet History</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Access-Internet"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">Access Internet</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Network-Edge"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">Network Edge</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Access-Networks"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">Access Networks</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Network-Core"><span class="post-toc-number">1.4.3.</span> <span class="post-toc-text">Network Core</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Typical-Network-Applications"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">Typical Network Applications</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Client-Server-Architecture"><span class="post-toc-number">1.5.1.</span> <span class="post-toc-text">Client-Server Architecture</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#P2P-Application"><span class="post-toc-number">1.5.2.</span> <span class="post-toc-text">P2P Application</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Protocol-Layers-and-Service-Model"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">Protocol Layers and Service Model</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#OSI"><span class="post-toc-number">1.6.1.</span> <span class="post-toc-text">OSI</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#TCP-IP-Protocol-Architecture"><span class="post-toc-number">1.6.2.</span> <span class="post-toc-text">TCP/IP Protocol Architecture</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Network-Programming"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">Network Programming</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Socket-Programming-with-TCP"><span class="post-toc-number">1.7.1.</span> <span class="post-toc-text">Socket Programming with TCP</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Socket-Programming-with-UDP"><span class="post-toc-number">1.7.2.</span> <span class="post-toc-text">Socket Programming with UDP</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Delay-Loss-and-Throughput"><span class="post-toc-number">1.8.</span> <span class="post-toc-text">Delay, Loss and Throughput</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Delay"><span class="post-toc-number">1.8.1.</span> <span class="post-toc-text">Delay</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Loss"><span class="post-toc-number">1.8.2.</span> <span class="post-toc-text">Loss</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Throughput"><span class="post-toc-number">1.8.3.</span> <span class="post-toc-text">Throughput</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Networks-under-Attack-Security"><span class="post-toc-number">1.9.</span> <span class="post-toc-text">Networks under Attack: Security</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Different-Types-of-Malware"><span class="post-toc-number">1.9.1.</span> <span class="post-toc-text">Different Types of Malware</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Types-of-Attack"><span class="post-toc-number">1.9.2.</span> <span class="post-toc-text">Types of Attack</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Catch-Up"><span class="post-toc-number">1.9.3.</span> <span class="post-toc-text">Catch-Up</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Chapter-2-Direct-Link-Networks"><span class="post-toc-number">2.</span> <span class="post-toc-text">Chapter 2. Direct Link Networks</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#链路层概述"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">链路层概述</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#链路层服务"><span class="post-toc-number">2.1.1.</span> <span class="post-toc-text">链路层服务</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#链路层实现"><span class="post-toc-number">2.1.2.</span> <span class="post-toc-text">链路层实现</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#差错检测和纠正技术"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">差错检测和纠正技术</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#奇偶校验"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">奇偶校验</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#检验和-方法"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">检验和 方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#循环冗余检测"><span class="post-toc-number">2.2.3.</span> <span class="post-toc-text">循环冗余检测</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#流量控制"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">流量控制</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#停止等待流量控制"><span class="post-toc-number">2.3.1.</span> <span class="post-toc-text">停止等待流量控制</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#滑动窗口流量控制"><span class="post-toc-number">2.3.2.</span> <span class="post-toc-text">滑动窗口流量控制</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#多路访问链路和协议"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">多路访问链路和协议</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#信道划分协议"><span class="post-toc-number">2.4.1.</span> <span class="post-toc-text">信道划分协议</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#随机接入协议"><span class="post-toc-number">2.4.2.</span> <span class="post-toc-text">随机接入协议</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#轮流协议"><span class="post-toc-number">2.4.3.</span> <span class="post-toc-text">轮流协议</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#用于电缆因特网接入的链路层协议"><span class="post-toc-number">2.4.4.</span> <span class="post-toc-text">用于电缆因特网接入的链路层协议</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#交换局域网"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">交换局域网</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#链路层寻址和ARP"><span class="post-toc-number">2.5.1.</span> <span class="post-toc-text">链路层寻址和ARP</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#以太网"><span class="post-toc-number">2.5.2.</span> <span class="post-toc-text">以太网</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#链路层交换机"><span class="post-toc-number">2.5.3.</span> <span class="post-toc-text">链路层交换机</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#虚拟局域网"><span class="post-toc-number">2.5.4.</span> <span class="post-toc-text">虚拟局域网</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Chapter-3-Packet-Switching-Networks"><span class="post-toc-number">3.</span> <span class="post-toc-text">Chapter 3. Packet Switching Networks</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#概述"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">概述</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#转发和路由选择"><span class="post-toc-number">3.1.1.</span> <span class="post-toc-text">转发和路由选择</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#网络服务模型"><span class="post-toc-number">3.1.2.</span> <span class="post-toc-text">网络服务模型</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#虚电路和数据报网络"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">虚电路和数据报网络</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#虚电路网络"><span class="post-toc-number">3.2.1.</span> <span class="post-toc-text">虚电路网络</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#数据报网络"><span class="post-toc-number">3.2.2.</span> <span class="post-toc-text">数据报网络</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#路由器工作原理"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">路由器工作原理</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#运输层"><span class="post-toc-number">4.</span> <span class="post-toc-text">运输层</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#多路复用和多路分解"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">多路复用和多路分解</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#无连接的多路复用与多路分解"><span class="post-toc-number">4.1.1.</span> <span class="post-toc-text">无连接的多路复用与多路分解</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#面向连接的多路复用与多路分解"><span class="post-toc-number">4.1.2.</span> <span class="post-toc-text">面向连接的多路复用与多路分解</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#UDP-无连接运输"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">UDP: 无连接运输</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#报文段结构"><span class="post-toc-number">4.2.1.</span> <span class="post-toc-text">报文段结构</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#UDP检验和"><span class="post-toc-number">4.2.2.</span> <span class="post-toc-text">UDP检验和</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#可靠数据传输原理"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">可靠数据传输原理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#构造可靠传输协议"><span class="post-toc-number">4.3.1.</span> <span class="post-toc-text">构造可靠传输协议</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#面向连接的运输-TCP"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">面向连接的运输: TCP</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#TCP连接"><span class="post-toc-number">4.4.1.</span> <span class="post-toc-text">TCP连接</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#TCP报文段结构"><span class="post-toc-number">4.4.2.</span> <span class="post-toc-text">TCP报文段结构</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#往返时间的估计与超时"><span class="post-toc-number">4.4.3.</span> <span class="post-toc-text">往返时间的估计与超时</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#可靠数据传输"><span class="post-toc-number">4.4.4.</span> <span class="post-toc-text">可靠数据传输</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#流量控制-1"><span class="post-toc-number">4.4.5.</span> <span class="post-toc-text">流量控制</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#TCP连接管理"><span class="post-toc-number">4.4.6.</span> <span class="post-toc-text">TCP连接管理</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#拥塞控制原理"><span class="post-toc-number">4.5.</span> <span class="post-toc-text">拥塞控制原理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#TCP拥塞控制"><span class="post-toc-number">4.6.</span> <span class="post-toc-text">TCP拥塞控制</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#公平性"><span class="post-toc-number">4.6.1.</span> <span class="post-toc-text">公平性</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#网络辅助拥塞控制"><span class="post-toc-number">4.6.2.</span> <span class="post-toc-text">网络辅助拥塞控制</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Chapter-4-Internetworking"><span class="post-toc-number">5.</span> <span class="post-toc-text">Chapter 4. Internetworking</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Chapter-5-End-to-End-Protocols"><span class="post-toc-number">6.</span> <span class="post-toc-text">Chapter 5. End-to-End Protocols</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Chapter-6-Congestion-Control-and-QoS"><span class="post-toc-number">7.</span> <span class="post-toc-text">Chapter 6. Congestion Control and QoS</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Chapter-7-Network-Security"><span class="post-toc-number">8.</span> <span class="post-toc-text">Chapter 7. Network Security</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Chapter-8-Internet-Applications"><span class="post-toc-number">9.</span> <span class="post-toc-text">Chapter 8. Internet Applications</span></a></li></ol>
        </nav>
    </aside>


<article id="post-Learn-CN-20190904-CN-ALL"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">CN-ALL</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-09-04 09:33:26" datetime="2019-09-04T01:33:26.000Z"  itemprop="datePublished">2019-09-04</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>[Textbook]: Computer Networking: A Top-Down Approach(7th Edition) by James F. Kurose, Keith W. Ross<br>搜索”#解题”查看所有计算题解题方法<br><a id="more"></a> </p>
<h1 id="Chapter-1-Introduction-of-Networking"><a href="#Chapter-1-Introduction-of-Networking" class="headerlink" title="Chapter 1: Introduction of Networking"></a>Chapter 1: Introduction of Networking</h1><blockquote>
<p>[Textbook] 1.x, 2.7 </p>
</blockquote>
<h2 id="What’s-the-Internet"><a href="#What’s-the-Internet" class="headerlink" title="What’s the Internet"></a>What’s the Internet</h2><ul>
<li>Connected Devices<ul>
<li>Hosts = End systems</li>
<li>Run network applications</li>
</ul>
</li>
<li>Communication links<ul>
<li>Optical fiber, Copper, Radio, Satellite</li>
<li>Build physical networks</li>
</ul>
</li>
<li>Routers<ul>
<li>Forward packets between physical networks</li>
</ul>
</li>
</ul>
<blockquote>
<p>Com.Dev. <ruby>—&gt;<rt>Com.Lnk.</rt></ruby>Phys.NtWk<ruby>—&gt;<rt>Router</rt></ruby>Internet</p>
</blockquote>
<h2 id="Building-Internet"><a href="#Building-Internet" class="headerlink" title="Building Internet"></a>Building Internet</h2><ul>
<li>Communication Infrastructure<ul>
<li>Enables distributed applications</li>
<li>e.g: Web, VoIP, email, online games, e-commerce, file sharing</li>
</ul>
</li>
<li>Communication Services Provided<ul>
<li>IP: Unreliable, data delivery</li>
<li>TCP: Reliable data delivery</li>
<li>QoS: Guaranteed delay and throughput<blockquote>
<p>Delay: 延迟; Throughput: 吞吐量/网速</p>
</blockquote>
</li>
</ul>
</li>
<li>Network Protocols<ul>
<li>Control sending, receiving of messages</li>
<li>e.g: HTTP, Skype; TCP, IP; PPP, Ethernet</li>
</ul>
</li>
<li>Internet Standards <ul>
<li>IETF: Internet Engineering Task Force</li>
<li>RFC: Request for comments</li>
</ul>
</li>
<li>Internet: “network of networks”<ul>
<li>Public Internet versus private Intranet</li>
<li>Loosely hierarchical<blockquote>
<p>Intranet: 内部网</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="Internet-History"><a href="#Internet-History" class="headerlink" title="Internet History"></a>Internet History</h2><ul>
<li>1961-1972: Early packet-switching principles</li>
<li>1972-1980: Internetworking, new and proprietary nets</li>
<li>1980-1990: new protocols, a proliferation of networks</li>
<li>1990’s, 2000’s: commercialization, the Web, new apps</li>
<li>2007~Now:<ul>
<li>P2P applications</li>
<li>Iot: Internet of things</li>
<li>SON: Self-Organizing Network</li>
<li>SDN: Software Defined Network</li>
<li>CDN: Content Distribution Network</li>
<li>ICN: Information-Centric Network</li>
</ul>
</li>
</ul>
<h2 id="Access-Internet"><a href="#Access-Internet" class="headerlink" title="Access Internet"></a>Access Internet</h2><h3 id="Network-Edge"><a href="#Network-Edge" class="headerlink" title="Network Edge"></a>Network Edge</h3><ul>
<li>End systems (hosts)<ul>
<li>Run application programs</li>
<li>e.g. Web, Email </li>
</ul>
</li>
<li>Client/Server model(P2S)<ul>
<li>Client host requests, receives service from always-on server</li>
<li>e.g. Web browser/server; Email client/server</li>
</ul>
</li>
<li>Peer-to-peer model(P2P)<ul>
<li>Minimal (or no) use of dedicated servers</li>
<li>e.g. Skype, BitTorrent</li>
</ul>
</li>
</ul>
<h3 id="Access-Networks"><a href="#Access-Networks" class="headerlink" title="Access Networks"></a>Access Networks</h3><ul>
<li>Physical media(Wired and wireless com.lnk.)</li>
<li>Connect end systems to edge router<ul>
<li>Residential access networks (Home)<ul>
<li>Dialup via modem: <ul>
<li>Up to 56Kbps</li>
<li>direct access to router</li>
</ul>
</li>
<li>DSL: Digital Subscriber line<ul>
<li>Deployment: Telephone company </li>
<li>Upstream: 1~3Mbps, Downstream: 8~24Mbps</li>
<li>Dedicated physical line to telephone central office</li>
</ul>
</li>
</ul>
</li>
<li>HFC: hybrid fiber coax<ul>
<li>Asymmetric: up to 30Mbps downstream, 2 Mbps upstream</li>
<li>Homes share access to ISP router</li>
<li>Deployment: cable TV companies</li>
</ul>
</li>
<li>Institutional networks (school, company)<ul>
<li>LAN connects end systems to router</li>
<li>Ethernet:<ul>
<li>10Mbps, 100Mbps, 1Gbps, 10Gbps</li>
<li>Modern configuration: Ethernet switch backbone connect end systems</li>
</ul>
</li>
</ul>
</li>
<li>Mobile access networks<ul>
<li><blockquote>
<p>End systems <ruby><--------><rt>Shared wireless media</rt></--------></ruby>Router</p>
</blockquote>
</li>
<li>Wireless LANs (WLAN)<ul>
<li>802.11b/g(WiFi): 11 or 54Mbps</li>
</ul>
</li>
<li>Wider-area wireless access<ul>
<li>Provided by telecommunication operator</li>
<li>10Mbps over cell network</li>
<li>LTE(4G) and WiMAX</li>
<li>20Gbps(5G?)</li>
</ul>
</li>
<li>Modern family<ul>
<li><blockquote>
<p><ruby>———=<rt>to/from cable headend</rt></ruby> Modem =—-= Router/Firewall =—-= Wireless AP - - - - Wireless Device</p>
</blockquote>
</li>
<li><blockquote>
<p><ruby>———=<rt>to/from cable headend</rt></ruby> Modem =—-= Router/Firewall <ruby>=—-=<rt>Ethernet</rt></ruby> Device</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Performance<ul>
<li>Bandwidth (bps)</li>
<li>Shared or dedicated<blockquote>
<p>Dedicated: 专用的</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="Network-Core"><a href="#Network-Core" class="headerlink" title="Network Core"></a>Network Core</h3><ul>
<li>Interconnected routers(Network of networks)</li>
<li>Circuit Switching<ul>
<li>Performance: Link bandwidth, switch capacity</li>
<li>Dedicated circuit per call, e.g: telephone</li>
<li>Circuit-like (guaranteed) performance</li>
<li>Require call setup/teardown</li>
</ul>
</li>
<li>Packet Switching<ul>
<li>Each end-to-end data stream divided into packets</li>
<li>Application A, B packets share network resources</li>
<li>Store and forward: packets move one hop at a time, stored (queued) at switches</li>
<li>Each packet uses full link bandwidth</li>
<li>Resource contention: aggregate (burst-up) resource demand can exceed amount available</li>
<li>Congestion: packets queue and wait for link use</li>
</ul>
</li>
<li>Statistical Multiplexing<ul>
<li>Link bandwidth dedicated or shared</li>
<li>Sequence of packets have or have not fixed pattern</li>
<li>Source that has higher bit rate occupies more time intervals</li>
</ul>
</li>
<li>Virtual Circuit<ul>
<li>Circuit Swithching + Packet Switching</li>
<li>Fixed router and main cross roads</li>
<li>Shared resource, requird congestion control</li>
<li>Resource can be preserved, leadingto different performance</li>
<li>Require connection setup/teardown</li>
</ul>
</li>
<li>Internet Structure – Network of Networks<ul>
<li>Roughly hierarchical</li>
<li>At center: “Tier-1” (National) ISPs</li>
<li>“Tier-2” ISPs: smaller (often regional) ISPs</li>
<li>“Tier-3” ISPs and local/edge ISPs, connect access networks</li>
</ul>
</li>
</ul>
<h2 id="Typical-Network-Applications"><a href="#Typical-Network-Applications" class="headerlink" title="Typical Network Applications"></a>Typical Network Applications</h2><ul>
<li>Client/Server Applications</li>
<li>P2P Applications</li>
<li><h3 id="Client-Server-Architecture"><a href="#Client-Server-Architecture" class="headerlink" title="Client-Server Architecture"></a>Client-Server Architecture</h3></li>
</ul>
<ul>
<li>Server<ul>
<li>Always-on host</li>
<li>Permanent IP address</li>
<li>Server farms for scaling</li>
</ul>
</li>
<li>Clients<ul>
<li>Communicate with server</li>
<li>May be intermittently connected</li>
<li>May have dynamic IP addresses</li>
<li>Do not communicate directly with each other</li>
</ul>
</li>
<li>Web and HTTP<ul>
<li>Request: Clients use browser to send URL(URI)s via HTTP to servers requesting a Web page</li>
<li>Construct: Web pages constructed using HTML (or other markup language), inter-connected by URL</li>
<li>Respond: Servers (or caches) respond with requested Web page</li>
<li>Display: Client’s browser displays Web page returned by server</li>
</ul>
</li>
<li>FTP<ul>
<li>Transfer file to/from remote host</li>
<li>Control connection: Login/logout, file trans command/reply</li>
<li>Data connection: File contents, client side initiates file transfer</li>
</ul>
</li>
<li>E-Mail<ul>
<li>MIME: Multi-purpose Internet Mail<blockquote>
<p>Non-text data</p>
</blockquote>
</li>
<li>SMTP: Simple Mail Transfer Protocol<blockquote>
<p>Simple text mail</p>
</blockquote>
</li>
<li>POP: Post Office Protocol<blockquote>
<p>Mail retrieval from server, including authorization and download</p>
</blockquote>
</li>
<li>IMAP: Internet Mail Access Protocol<blockquote>
<p>Manipulation of stored mails on server</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="P2P-Application"><a href="#P2P-Application" class="headerlink" title="P2P Application"></a>P2P Application</h3><ul>
<li>BitTorrent<ul>
<li>File divided into chunks</li>
<li>Peer join torrent<ul>
<li>Register to tracker to get list of peers</li>
<li>Connect to some peers</li>
<li>Issue requests for missing chunks</li>
</ul>
</li>
<li>Upload chunks<ul>
<li>send </li>
</ul>
</li>
<li>Peers may come and go </li>
</ul>
</li>
<li>Skype<ul>
<li>P2P VoIP: PC/Phone</li>
<li>Proprietary application layer protocol<blockquote>
<p>Proprietary: 专有的</p>
</blockquote>
</li>
<li>Make a call<ul>
<li>Register: SC(skype client) register with SN(super node)</li>
<li>Authenticate: SC authenticate(log in)</li>
<li>Call: SC contact SN with caller ID</li>
<li>SN contacts other SNs to find callee address</li>
<li>SC directly contacts callee over UDP/TCP</li>
</ul>
</li>
<li>Login server: authentication; Super node: exchange address</li>
<li><h2 id="Protocol-Layers-and-Service-Model"><a href="#Protocol-Layers-and-Service-Model" class="headerlink" title="Protocol Layers and Service Model"></a>Protocol Layers and Service Model</h2></li>
</ul>
</li>
</ul>
<h3 id="OSI"><a href="#OSI" class="headerlink" title="OSI"></a>OSI</h3><ul>
<li>Physical<ul>
<li>bits across link</li>
<li>Physical interface</li>
<li>Physical aspects: Mechanical, Electrical/Optical, Functional/Procedural</li>
</ul>
</li>
<li>Data Link<ul>
<li>frames</li>
<li>activation, maintenance, deactivation of connection</li>
<li>medium access control for muiltiple access</li>
<li>error detection and retransmission: error-free transmission</li>
<li>flow control</li>
</ul>
</li>
<li>Network<ul>
<li>packet across mulltiple links/networks</li>
<li>addressing and routing</li>
<li>Forwarding transfers packet across a node</li>
<li>Congestion control to deal with traffic surges</li>
<li>Connection setup, maintenance, and teardown</li>
</ul>
</li>
<li>Transport<ul>
<li>data between end systems</li>
<li>Reliable stream transfer or quick-and-simple single-block transfer</li>
<li>Connection setup, maintenance, and release</li>
</ul>
</li>
<li>-Session- into App.</li>
<li>-Presentation- into App.</li>
<li>Application<ul>
<li>Means for applications to access OSI environment</li>
</ul>
</li>
<li>Service Primitives and Parameters<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">      ServiceUserA                  ServiceUserB</span><br><span class="line">          +  |                            +  |</span><br><span class="line">Confirm   |  |   Request     Indication   |  |  Response</span><br><span class="line">          |  +                            |  +</span><br><span class="line">             (N-1) Layer Service Provider</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="TCP-IP-Protocol-Architecture"><a href="#TCP-IP-Protocol-Architecture" class="headerlink" title="TCP/IP Protocol Architecture"></a>TCP/IP Protocol Architecture</h3><blockquote>
<p>Used by global Internet</p>
</blockquote>
<ul>
<li>Application: supporting network applications<blockquote>
<p>FTP, SMTP, HTTP</p>
</blockquote>
</li>
<li>Transport: process-process data transfer<blockquote>
<p>TCP, UDP</p>
</blockquote>
</li>
<li>Internetwork: routing of datagrams across net of nets<blockquote>
<p>IP, routing protocols</p>
</blockquote>
</li>
<li>Link: data transfer between neighboring routers / hosts<blockquote>
<p>PPP, Ethernet</p>
</blockquote>
</li>
<li>Physical: bits “on the wire”<br>Protocol Data Units(PDU)</li>
<li>Control info is added to user data at each layer</li>
<li>Segment and Header: Transport layer segments application data, a transport header added<ul>
<li>Destination SAP, Sequence number, Error detection code<br>The IP Layer in Detail</li>
</ul>
</li>
<li>Sender encapsulates segments into datagrams</li>
<li>Receiver delivers segments to transport layer</li>
<li>Router examines header fields in all IP datagrams</li>
</ul>
<h2 id="Network-Programming"><a href="#Network-Programming" class="headerlink" title="Network Programming"></a>Network Programming</h2><ul>
<li>Socket programming<ul>
<li>Build client/server application that communicate using sockets</li>
<li>A socket is a pair of [IP addresses, port]</li>
</ul>
</li>
<li>Socket API<ul>
<li>Introduced in BSD4.1 UNIX, 1981</li>
<li>Explicitly created, used, and released by applications</li>
<li>Implementing client/server paradigm</li>
</ul>
</li>
<li>2 types of transport service via socket API<ul>
<li>Unreliable datagram, i.e. UDP</li>
<li>Reliable, byte stream-oriented, i.e. TCP</li>
</ul>
</li>
</ul>
<h3 id="Socket-Programming-with-TCP"><a href="#Socket-Programming-with-TCP" class="headerlink" title="Socket Programming with TCP"></a>Socket Programming with TCP</h3><ul>
<li>Client: Create socket-&gt;Specify [IP<sub>s</sub>, Port<sub>s</sub>]-&gt;Recieve reply, connection [IP<sub>c</sub>, Port<sub>c</sub>; IP<sub>s</sub>,Port<sub>s</sub>]</li>
<li>Server: Create listening Socket-&gt;Accept contact, create new socket-&gt;connection [IP<sub>c</sub>, Port<sub>c</sub>; IP<sub>s</sub>, Port<sub>s</sub>]</li>
<li>Server distinguish clients using [IP<sub>c</sub>, Port<sub>c</sub>]</li>
<li>Interaction:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">    SERVER                                        CLIENT </span><br><span class="line">    create listening socket  </span><br><span class="line">      |                         TCP con. setup</span><br><span class="line">+-&gt; wait for connection      &lt;----------------&gt;  create socket</span><br><span class="line">|     |                                             |</span><br><span class="line">|   read request             &lt;-----------------  send request</span><br><span class="line">|     |                                             |</span><br><span class="line">|   write reply              -----------------&gt;  read reply</span><br><span class="line">|     |                                             |</span><br><span class="line">+-- close                                         close</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Socket-Programming-with-UDP"><a href="#Socket-Programming-with-UDP" class="headerlink" title="Socket Programming with UDP"></a>Socket Programming with UDP</h3><ul>
<li>No connection</li>
<li>Sender attaches IP address, port of destination to each packet</li>
<li>Receiver extract IP address, port of sender from received packet</li>
<li>Transmitted data may be received out of order, or lost</li>
<li>Interaction:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    SERVER                                        CLIENT </span><br><span class="line">    create listening socket  </span><br><span class="line">      |                                             </span><br><span class="line">+-&gt; read request             &lt;-----------------  send request</span><br><span class="line">|     |                                             |</span><br><span class="line">|   write reply              -----------------&gt;  read reply</span><br><span class="line">|     |                                             |</span><br><span class="line">+-- close                                         close</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Delay-Loss-and-Throughput"><a href="#Delay-Loss-and-Throughput" class="headerlink" title="Delay, Loss and Throughput"></a>Delay, Loss and Throughput</h2><h3 id="Delay"><a href="#Delay" class="headerlink" title="Delay"></a>Delay</h3><ul>
<li>Source of delay<ul>
<li>Transmission: $L/R$; microseconds</li>
<li>Propagation: $d/s$; microseconds</li>
<li>Nodal processing: Error-check &amp; determine link; microseconds</li>
<li>Queuing: wait in queue, congestion level; seconds</li>
</ul>
</li>
<li>Queuing Delay<ul>
<li>Traffic intensity: $\rho = L\times\alpha/R$<blockquote>
<p>$\alpha$: average packet arrival rate</p>
<ul>
<li>$\rho\sim 0$: average queuing delay small</li>
<li>$\rho\to 1$: delays become large</li>
<li>$\rho\geq 1$: delays infinite</li>
</ul>
</blockquote>
</li>
</ul>
</li>
<li>“Real” Internet Delays and Routes<ul>
<li>traceroute<ul>
<li>Provides delay measurement from source to router along end-to-end Internet path towards destination</li>
<li>Each intermediate router will return packets to sender</li>
<li>Sender records time interval between transmission and reply</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Loss"><a href="#Loss" class="headerlink" title="Loss"></a>Loss</h3><ul>
<li>Buffer of a router has finite capacity</li>
<li>Packet arriving to full queue dropped</li>
<li>Lost packet may be retransmitted, if not, it’s lost</li>
</ul>
<h3 id="Throughput"><a href="#Throughput" class="headerlink" title="Throughput"></a>Throughput</h3><ul>
<li>Rate (bits/unit per time) at which bits transferred between sender/receiver</li>
<li>Instantaneous or Average</li>
<li>Multiplexing: $\min(R_c, R_s, R/N_l)$</li>
</ul>
<h2 id="Networks-under-Attack-Security"><a href="#Networks-under-Attack-Security" class="headerlink" title="Networks under Attack: Security"></a>Networks under Attack: Security</h2><ul>
<li>Attacks on Internet infrastructure<ul>
<li>Infecting/attacking hosts: malware, spyware, worms,   unauthorized access</li>
<li>Packet sniffing, replay, masquerade</li>
<li>Denial of service: deny access to resources (servers, link bandwidth)</li>
</ul>
</li>
<li>Internet not originally designed with security in mind<ul>
<li>Original vision: “a group of mutually trusting users attached to a transparent network”</li>
<li>Internet protocol designers playing “catch-up”</li>
<li>Security considerations in all layers!</li>
</ul>
</li>
</ul>
<h3 id="Different-Types-of-Malware"><a href="#Different-Types-of-Malware" class="headerlink" title="Different Types of Malware"></a>Different Types of Malware</h3><ul>
<li>Virus: Infection, Run executables, Self-replicating</li>
<li>Worm:  Transmitting over a network</li>
<li>Trojan horses: Disguised as innocuous or desirable, Tempting user to run</li>
<li>Backdoor: Bypassing authentication procedures</li>
<li>Adware: Advertisements</li>
<li>Spyware: Recording activity</li>
</ul>
<h3 id="Types-of-Attack"><a href="#Types-of-Attack" class="headerlink" title="Types of Attack"></a>Types of Attack</h3><ul>
<li>Denial of Service(DoS)<ul>
<li>overwhelming resource with bogus traffic</li>
<li>Break into hosts -&gt; use compromised hosts to send packets to target</li>
</ul>
</li>
<li>Packet Sniffing<ul>
<li>Broadcast media required</li>
<li>Promiscuous NIC reads/records all packets passing by</li>
</ul>
</li>
<li>IP Spoofing<ul>
<li>putting any value into IP source address field</li>
<li>Receiver can’t tell if source is spoofed</li>
</ul>
</li>
<li>Masquerade<ul>
<li>IP spoofing: send packet with false source address</li>
<li>Record-and-playback: sniff sensitive info (e.g.,password), and use later</li>
</ul>
</li>
</ul>
<h3 id="Catch-Up"><a href="#Catch-Up" class="headerlink" title="Catch-Up"></a>Catch-Up</h3><ul>
<li>What Trudy Might Do<ul>
<li>Eavesdrop: intercept messages</li>
<li>Insert messages into connection</li>
<li>Impersonation: can fake (spoof) source address</li>
<li>Hijacking: “take over” ongoing connection by removing sender or receiver, inserting himself in place</li>
<li>Denial of service: prevent service from being used by others</li>
</ul>
</li>
<li>How to Handle This<ul>
<li>Encryption: the message cannot be understood</li>
<li>MAC: the message cannot be altered</li>
<li>Sign: the source cannot be forged</li>
</ul>
</li>
</ul>
<h1 id="Chapter-2-Direct-Link-Networks"><a href="#Chapter-2-Direct-Link-Networks" class="headerlink" title="Chapter 2. Direct Link Networks"></a>Chapter 2. Direct Link Networks</h1><blockquote>
<p>[Textbook] 5.x, 6.x</p>
</blockquote>
<h2 id="链路层概述"><a href="#链路层概述" class="headerlink" title="链路层概述"></a>链路层概述</h2><ul>
<li>结点(Node): 主机(Host), 路由器(Router)</li>
<li>链路(Link): 连接相邻节点的通信通道</li>
</ul>
<h3 id="链路层服务"><a href="#链路层服务" class="headerlink" title="链路层服务"></a>链路层服务</h3><ul>
<li>成帧: 数据组合成帧, 若干首部+数据字段(网络层数据报)</li>
<li>接入: 媒体访问控制(MAC), 协调结点在共享媒体的传输</li>
<li>可靠交付: 保证无差错地传输网络层数据报(有线连接有时不提供这一服务)</li>
<li>检错和纠错: 硬件完成, 比运输层和网络层复杂</li>
</ul>
<h3 id="链路层实现"><a href="#链路层实现" class="headerlink" title="链路层实现"></a>链路层实现</h3><ul>
<li>网络适配器/网络接口卡(Adapter/NIC)<ul>
<li>核心是链路层控制器</li>
<li>单独的PCI卡 或 集成到主板</li>
</ul>
</li>
</ul>
<h2 id="差错检测和纠正技术"><a href="#差错检测和纠正技术" class="headerlink" title="差错检测和纠正技术"></a>差错检测和纠正技术</h2><ul>
<li>差错检测和纠正比特(EDC):<br>[D]–(发送)–&gt;[D+EDC]–(易出错链路)–&gt;[D’+EDC’]–(接收)–&gt;有错丢弃, 无错则D’=D</li>
<li>未检出比特差错: D’&lt;&gt;D, 但仍然有效, 未检出错误</li>
<li>前向纠错: 接收方检测和纠正错误<h3 id="奇偶校验"><a href="#奇偶校验" class="headerlink" title="奇偶校验"></a>奇偶校验</h3></li>
<li>单个奇偶校验位<ul>
<li>|EDC|=1 </li>
<li>检测奇数个错误比特</li>
</ul>
</li>
<li>二维奇偶校验<ul>
<li>数据d组成i×j矩阵, 每行每列有校验比特</li>
<li>可以检测任意2比特差错, 纠正单比特差错<h3 id="检验和-方法"><a href="#检验和-方法" class="headerlink" title="检验和 方法"></a>检验和 方法</h3></li>
</ul>
</li>
<li>因特网校验和<ul>
<li>数据作为16比特整数进行求和, 取反码作为校验和, |EDC|=16</li>
<li>D+EDC同样求和, 全1则正确, 有任意0则有错</li>
</ul>
</li>
<li>#解题: 因特网检验和计算方法<ul>
<li>分段: 16bit一段</li>
<li>求和: 挨个加和, 最高位进位到最低位</li>
<li>取反: 取反码, 接在数据后面发送</li>
<li>检验: 对收到的信息进行以上三步, 全1则无误<h3 id="循环冗余检测"><a href="#循环冗余检测" class="headerlink" title="循环冗余检测"></a>循环冗余检测</h3></li>
</ul>
</li>
<li>循环冗余检测/多项式编码<ul>
<li>r+1比特的多项式, 生成r比特CRC, 不断按位异或</li>
<li>检测小于r+1比特的突发(连续)比特差错, 检测任何奇数个比特差错</li>
</ul>
</li>
<li>#解题: CRC计算方法(r+1比特的多项式)<ul>
<li>补0: 补r个0到需检验的数据后</li>
<li>异或: 类似除法, 用异或代替减法, 不断消除最高位的1</li>
<li>取余: 最后得到的r位余数就是CRC, 代替那r个0, 接在数据后</li>
<li>检验: 对收到的数据做前三步, 余数为0则无误</li>
</ul>
</li>
</ul>
<h2 id="流量控制"><a href="#流量控制" class="headerlink" title="流量控制"></a>流量控制</h2><h3 id="停止等待流量控制"><a href="#停止等待流量控制" class="headerlink" title="停止等待流量控制"></a>停止等待流量控制</h3><ul>
<li>流程<ul>
<li>源点发送</li>
<li>终点收到帧, 回复ACK</li>
<li>原点收到ACK, 发送下一帧</li>
<li>终点不发ACK终止流</li>
</ul>
</li>
<li>对长帧效果好<h3 id="滑动窗口流量控制"><a href="#滑动窗口流量控制" class="headerlink" title="滑动窗口流量控制"></a>滑动窗口流量控制</h3></li>
<li>流程<ul>
<li>接收端缓存大小 W  </li>
<li>发送端在没有收到ACK前可以发送W个帧  </li>
<li>每个帧通过序号来标识, 序号大小受字段长度限制(k bits)帧以 2^k 为模编号($0\to 2^{k}-1$)  </li>
<li>ACK(RRx)包含下一个期望收到的帧编号x</li>
</ul>
</li>
<li>最大窗口大小: $W\leq 2^{k-1}-1$, 防止歧义</li>
<li>差错控制<ul>
<li>Go back N: NAK, 然后出错帧及其后的全部重传</li>
<li>选择拒绝: 被拒绝的帧重传, 接收端缓存后面的</li>
</ul>
</li>
</ul>
<h2 id="多路访问链路和协议"><a href="#多路访问链路和协议" class="headerlink" title="多路访问链路和协议"></a>多路访问链路和协议</h2><ul>
<li>广播链路: 多点, 一个信道</li>
<li>碰撞: 多个结点同时发送<h3 id="信道划分协议"><a href="#信道划分协议" class="headerlink" title="信道划分协议"></a>信道划分协议</h3></li>
<li>时分复用TDM<ul>
<li>时隙slot, 每轮每结点一个时隙</li>
<li>速率: R/N, 负载不均衡时浪费, 统计时分复用解决, 有额外开销</li>
</ul>
</li>
<li>频分复用FDM<ul>
<li>分频率, 一人一频</li>
<li>速率: R/N, 负载不均衡时浪费</li>
</ul>
</li>
<li>码分多址CDMA<ul>
<li>每结点一个编码, 1电平为此编码, 0为编码取反</li>
<li>速率: R, 可同时发送(每个结点的编码必须线性不相关), 抗干扰</li>
</ul>
</li>
</ul>
<h3 id="随机接入协议"><a href="#随机接入协议" class="headerlink" title="随机接入协议"></a>随机接入协议</h3><ul>
<li>时隙ALOHA<ul>
<li>有ACK</li>
<li>前提: 每帧长L, 每时隙L/R, 结点同步, 且在时隙开始时才传输, 碰撞检测够快</li>
<li>流程<ul>
<li>发送: 结点在一个时隙开始发送帧<ul>
<li>成功: 若没检测到碰撞, 则认为成功传输</li>
</ul>
</li>
<li>失败: 检测到碰撞, 在之后的时隙中以概率p不断尝试重传, 直到没有碰撞</li>
</ul>
</li>
<li>效率: 取p=1/N时最大化, 当N趋于无穷时, 效率为1/e</li>
</ul>
</li>
<li>ALOHA<ul>
<li>有ACK<blockquote>
<p>除了不同步, 跟时隙ALOHA一样</p>
</blockquote>
</li>
<li>流程<ul>
<li>发送: 结点在一个时隙开始发送帧<ul>
<li>成功: 若没检测到碰撞, 则认为成功传输</li>
</ul>
</li>
<li>失败: 检测到碰撞, 立刻以概率p不断尝试重传, 直到没有碰撞</li>
</ul>
</li>
<li>效率: 取p=1/N时最大化, 当N趋于无穷时, 效率为1/2e(前后都可能有重叠)</li>
</ul>
</li>
<li>CSMA/CD<ul>
<li>无ACK</li>
<li>不做同步</li>
<li>流程<ul>
<li>监听: 监听信道是否空闲, 空闲时才开始传输</li>
<li>传输: 传输时也不断监听是否有其他结点的信号能量<ul>
<li>成功: 未发现其他能量, 认为发送成功</li>
</ul>
</li>
<li>失败: 发现其他能量, 立刻停止; <strong>发送48bit干扰信号</strong></li>
<li>等待(非持续): 等待一个随机时间, 回到”监听”重传</li>
<li>回退(p持续): 之后的时间当中以概率p重传</li>
<li>回退(1持续, 以太网): 使用二进制指数后退<ul>
<li>经历过了k次碰撞, 就从[0,…,2^k-1]中选一个K值, 等待512K个比特时间</li>
<li>k最大为10</li>
<li>最多尝试16次发送</li>
</ul>
</li>
</ul>
</li>
<li>效率: 近似为<br>$$\frac{1}{1+5d_{prop}/d_{trans}}$$</li>
<li>最小帧长: 检测冲突的时长不超过端到端传播时延的2倍, 取这一值为最小帧长</li>
</ul>
</li>
</ul>
<h3 id="轮流协议"><a href="#轮流协议" class="headerlink" title="轮流协议"></a>轮流协议</h3><ul>
<li>轮询协议<ul>
<li>流程: 每个从结点n<ul>
<li>主节点发帧, 告诉从节点n能够发送的最大包数</li>
<li>从节点发送不超过n帧</li>
<li>主节点发现没有信号了, 继续轮询下一个从节点</li>
</ul>
</li>
<li>缺点: 轮询时延(第一步耗时); 主节点损坏则信道无用</li>
</ul>
</li>
<li>令牌传递协议<ul>
<li>流程<ul>
<li>收到令牌</li>
<li>如果有帧要发, 则发送不超过最大数目的帧数</li>
<li>传递令牌</li>
</ul>
</li>
<li>缺点: 令牌传播时延, 令牌丢失, 单点故障则信道崩溃</li>
</ul>
</li>
</ul>
<h3 id="用于电缆因特网接入的链路层协议"><a href="#用于电缆因特网接入的链路层协议" class="headerlink" title="用于电缆因特网接入的链路层协议"></a>用于电缆因特网接入的链路层协议</h3><ul>
<li>信道划分<ul>
<li>FDM: 划分为下行和上行, 下行每个6MHz, 上行每个6.4MHz<ul>
<li>(下行只有一个 CMTS-电缆调制解调器端接系统 在发送, 不存在多路)</li>
<li>类似TDM: 划分为序列微时隙<ul>
<li>请求帧微时隙: 可能碰撞, 使用随机接入</li>
<li>数据帧微时隙: 收到请求后由CMTS通过下行信道分配给Modem, 不碰撞<h2 id="交换局域网"><a href="#交换局域网" class="headerlink" title="交换局域网"></a>交换局域网</h2><h3 id="链路层寻址和ARP"><a href="#链路层寻址和ARP" class="headerlink" title="链路层寻址和ARP"></a>链路层寻址和ARP</h3></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>媒体访问控制 MAC地址<ul>
<li>长度: 6字节</li>
<li>与适配器(NIC等)绑定</li>
<li>广播地址: 全1, 即12个F</li>
<li>每个主机都检查MAC是否与自己相同, 相同则接收</li>
</ul>
</li>
<li>地址解析协议 ARP协议<ul>
<li>子网内解析</li>
<li>每台主机或路由器存有ARP表, 保存了其知晓的MAC-IP对应关系, 每个条目有过期时间</li>
<li>流程<ul>
<li>若有表项, 直接构造包并发送</li>
<li>若无, 向适配器发送ARP分组(发送和接收的IP地址, 目的MAC是广播地址)</li>
<li>每个主机都收到, 若IP相同, 则响应ARP分组, 用标准链路层帧回复</li>
</ul>
</li>
</ul>
</li>
<li>发送数据报到子网以外<ul>
<li>路由器每个端口均有MAC和IP</li>
<li>路由器将相应ARP, 主机获得的此IP的MAC地址是路由器这一端口的MAC<h3 id="以太网"><a href="#以太网" class="headerlink" title="以太网"></a>以太网</h3></li>
</ul>
</li>
<li>以太网帧结构<ul>
<li>帧字段<ul>
<li>前同步码: 8字节: 前7个字节都是10101010, 同步时钟并唤醒适配器; 最后一个是10101011, “11”警告适配器数据到来</li>
<li>目的MAC地址: 6字节: 与自己的MAC相同才会接收</li>
<li>源MAC地址: 6字节</li>
<li>类型字段: 2字节: 允许以太网复用多种网络层协议</li>
<li>数据: 46-1500: 承载IP数据报, 超长将分片</li>
<li>CRC: 4字节: 适配器丢弃校验出错的帧</li>
</ul>
</li>
<li>无连接服务: 不事先握手</li>
<li>不可靠服务: 成功无ACK, 失败无REJ</li>
</ul>
</li>
<li>以太网技术<ul>
<li>命名: [速率]BASE[距离 或 介质], T指铜双绞线, FX/SX/BX指光纤</li>
<li>10Mbps: 10BASE[%d], 距离, 使用同轴电缆</li>
<li>100Mbps: 100BASE-TX/T4/T2双绞线, -FX/SX/BX光纤</li>
<li>1000Mbps: 1000BASE-T等, 又名802.3z, 双绞线, 兼容旧标准, 点对点(交换机)信道全双工, 另有广播(集线器)</li>
<li>10Gbps: 10GBASE-T<h3 id="链路层交换机"><a href="#链路层交换机" class="headerlink" title="链路层交换机"></a>链路层交换机</h3></li>
</ul>
</li>
<li>交换机转发和过滤<ul>
<li>过滤: 决定帧应该发到某个接口还是将其丢弃</li>
<li>转发: 决定帧去往哪个接口<ul>
<li>流程: 借助交换机表(MAC - 接口 - 时间)<ul>
<li>没找到目的MAC, 向源以外的所有端口广播</li>
<li>找到MAC, 与源端口匹配, 则丢弃</li>
<li>找到MAC, 与另一端口匹配, 转发到这一端口(进入端口的缓存)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>自学习<ul>
<li>流程<ul>
<li>初始: 交换表为空</li>
<li>学习: 收到帧, 则将[源MAC地址 - 到达的接口 - 当前时间]存入交换表</li>
<li>老化: 一段时间后未收到这一地址作为源的帧, 则此表项移除</li>
</ul>
</li>
<li>即插即用设备: 无需进行配置</li>
<li>双工: 每个接口可同时发送和接收</li>
</ul>
</li>
<li>链路层交换机的性质<ul>
<li>消除碰撞: 星型拓扑, 没有因碰撞而浪费的带宽</li>
<li>异质链路: 链路彼此隔离, 允许不同速率, 新旧混用</li>
<li>管理: 检测异常适配器并断开之, 等</li>
</ul>
</li>
<li>交换机与路由器<ul>
<li>交换机<ul>
<li>优: 即插即用, 分组过滤, 高速率</li>
<li>缺: 拓扑限制为树形, 不提供广播风暴的保护</li>
</ul>
</li>
<li>路由器<ul>
<li>优: 拓扑灵活, 提供防火墙保护</li>
<li>缺: 需要配置, 处理延迟大<h3 id="虚拟局域网"><a href="#虚拟局域网" class="headerlink" title="虚拟局域网"></a>虚拟局域网</h3></li>
</ul>
</li>
</ul>
</li>
<li>树形交换局域网的缺陷<ul>
<li>缺乏流量隔离: 单播能够隔离, 但广播不行; 缺乏安全隐私的隔离</li>
<li>交换机无效使用: 为了分组造成交换机端口的浪费</li>
<li>管理用户: 用户在分组间移动, 则需要改变物理布线, 连接到不同交换机</li>
</ul>
</li>
<li>VLAN: 单一的物理交换机定义多个虚拟局域网, 广播流量仅到达同一分组的端口<ul>
<li>跨VLAN需要路由器</li>
<li>VLAN划分: 端口 或 MAC</li>
<li>VLAN干线连接<ul>
<li>干线接口: VLAN交换机之间交换帧</li>
<li>帧格式802.1Q: 以太网帧的源地址和类型之间, 加入VLAN标志</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="Chapter-3-Packet-Switching-Networks"><a href="#Chapter-3-Packet-Switching-Networks" class="headerlink" title="Chapter 3. Packet Switching Networks"></a>Chapter 3. Packet Switching Networks</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="转发和路由选择"><a href="#转发和路由选择" class="headerlink" title="转发和路由选择"></a>转发和路由选择</h3><ul>
<li>转发: 分组到达输入链路, 路由器将其移动到适当的输出链路<ul>
<li>转发表: 首部 - 输出链路, 根据第三层首部, 决定输出链路</li>
</ul>
</li>
<li>路由选择: 网络层决定分组所采用的路由或路径<ul>
<li>路由选择算法: 决定了首部对应的输出链路的值; 集中式/分布式; 人工配置/路由选择协议</li>
<li>路由器: 除链路层交换机 以外的 分组交换机</li>
</ul>
</li>
<li>连接建立: 分组流动之前建立状态<h3 id="网络服务模型"><a href="#网络服务模型" class="headerlink" title="网络服务模型"></a>网络服务模型</h3></li>
<li>网络服务<ul>
<li>确保交付: 确保到达目的地</li>
<li>有时延上界的确保交付: 在规定时间内到达</li>
<li>有序分组交付: 发送与接收的顺序相同</li>
<li>确保最小带宽</li>
<li>确保最大时延抖动: 相邻分组发送时的时间差 与 相邻分组接收时的时间差 相差不超过特定值</li>
<li>安全性服务: 密钥加密</li>
</ul>
</li>
<li>因特网: 尽力而为(没任何网络服务)</li>
<li>ATM: CBR(恒定比特率, 无丢包, 有序, 维护定时); ABR(可用比特率, 维护最小速率, 有序, 提供拥塞指示)<h2 id="虚电路和数据报网络"><a href="#虚电路和数据报网络" class="headerlink" title="虚电路和数据报网络"></a>虚电路和数据报网络</h2><h3 id="虚电路网络"><a href="#虚电路网络" class="headerlink" title="虚电路网络"></a>虚电路网络</h3></li>
<li>虚电路: 在网络层使用连接</li>
<li>组成<ul>
<li>源和目的的路径</li>
<li>VC号, 该路径每段链路的号码</li>
<li>路由转发表表项, [入接口 - 入VC - 出接口 - 出VC]</li>
</ul>
</li>
<li>连接状态信息: 新连接添加表项, 断开连接删除表项<ul>
<li>虚电路建立<ul>
<li>运输层联络网络层, 指定接收地址(信令报文-信令协议)</li>
<li>网络层决定路径, 分配VC号, 添加表项, 预留资源</li>
</ul>
</li>
<li>数据传送</li>
<li>虚电路拆除<ul>
<li>接收方或发送方通知网络层终止虚电路</li>
<li>网络层通知另一端结束呼叫, 更新表项<h3 id="数据报网络"><a href="#数据报网络" class="headerlink" title="数据报网络"></a>数据报网络</h3></li>
</ul>
</li>
</ul>
</li>
<li>转发表: [前缀 - 链路接口]<ul>
<li>最长前缀匹配规则</li>
<li>转发表的更新: 路由选择算法</li>
</ul>
</li>
</ul>
<h2 id="路由器工作原理"><a href="#路由器工作原理" class="headerlink" title="路由器工作原理"></a>路由器工作原理</h2><ul>
<li>输入端口<ul>
<li>线路端接: 物理线路接入</li>
<li>数据链路处理: 协议, 拆封</li>
<li>查找转发排队: 查找转发表, 存帧排队</li>
</ul>
</li>
<li>交换结构<ul>
<li>经内存交换</li>
<li>经总线交换</li>
<li>经互连网络交换(纵横式)</li>
</ul>
</li>
<li>输出端口: 排队, 数据链路处理, 线路端接</li>
<li>何处出现排队</li>
</ul>
<p>&lt;&lt;&lt; TODO &gt;&gt;&gt;</p>
<h1 id="运输层"><a href="#运输层" class="headerlink" title="运输层"></a>运输层</h1><h2 id="多路复用和多路分解"><a href="#多路复用和多路分解" class="headerlink" title="多路复用和多路分解"></a>多路复用和多路分解</h2><ul>
<li>套接字Socket: 应用层-网络层 门户<ul>
<li>具有唯一标识符</li>
<li>运输层报文开头的2个字段: 源端口号16bit : 目的端口号16bit<ul>
<li>周知端口号: 0~1023<h3 id="无连接的多路复用与多路分解"><a href="#无连接的多路复用与多路分解" class="headerlink" title="无连接的多路复用与多路分解"></a>无连接的多路复用与多路分解</h3></li>
</ul>
</li>
</ul>
</li>
<li>UDP套接字由二元组进行标识: 目的IP : 目的端口号</li>
<li>源端口号: 回复时使用<h3 id="面向连接的多路复用与多路分解"><a href="#面向连接的多路复用与多路分解" class="headerlink" title="面向连接的多路复用与多路分解"></a>面向连接的多路复用与多路分解</h3></li>
<li>TCP套接字由四元组进行标识: 源IP : 源端口号 : 目的IP : 目的端口号</li>
<li>不同来源的报文到达同一端口可区分, HTTP服务器<h2 id="UDP-无连接运输"><a href="#UDP-无连接运输" class="headerlink" title="UDP: 无连接运输"></a>UDP: 无连接运输</h2></li>
<li>仅提供复用分解, 差错检测</li>
<li>无连接: 发送报文段之前, 没有握手</li>
<li>优点: 首部短, 时间灵活, 无连接建立, 无连接状态</li>
<li>无拥塞控制, 可以由应用层构建可靠传输<h3 id="报文段结构"><a href="#报文段结构" class="headerlink" title="报文段结构"></a>报文段结构</h3>| 源端口号 | 目的端口号 | 长度(首部+数据) | 检验和 | 应用数据(报文) |<br>|-|-|-|-|-|<br>| 16bit | 16bit | 16bit | 16bit | … | <ul>
<li>UDP变长数据段</li>
<li>检验和计算: UDP报文段 + IP首部的部分字段()<h3 id="UDP检验和"><a href="#UDP检验和" class="headerlink" title="UDP检验和"></a>UDP检验和</h3></li>
</ul>
</li>
<li>计算方法<ul>
<li>报文段分为16bit字, 相加求和</li>
<li>最高位进位回卷, 加到最低位</li>
<li>取反码</li>
</ul>
</li>
<li>检验方法: 接收方做前两步, 得到全1, 则没问题</li>
<li>能检测, 不能纠错, 端到端差错控制<h2 id="可靠数据传输原理"><a href="#可靠数据传输原理" class="headerlink" title="可靠数据传输原理"></a>可靠数据传输原理</h2></li>
<li>可靠数据传输协议: (服务抽象)传输的比特不会受损或丢失, 并且按序到达<h3 id="构造可靠传输协议"><a href="#构造可靠传输协议" class="headerlink" title="构造可靠传输协议"></a>构造可靠传输协议</h3><!-- 不管了, 数据通信学过了, 就那三个差错控制 -->
<!-- 需要额外补充一点, 之后再做 -->
&lt;!– + 经完全可靠信道的可靠数据传输: 废话</li>
<li>经具有比特差错的信道的可靠数据传输<ul>
<li>三个功能: 差错检测, 接收方反馈, 重传</li>
<li>发送端: 2个状态<ul>
<li>等待上层调用</li>
<li>等待接收方回复ACK/NAK</li>
</ul>
</li>
<li>接收端: 1个状态: 等待上层调用,  –&gt;</li>
</ul>
</li>
</ul>
<h2 id="面向连接的运输-TCP"><a href="#面向连接的运输-TCP" class="headerlink" title="面向连接的运输: TCP"></a>面向连接的运输: TCP</h2><ul>
<li>提供差错检测, 重传, 累积确认, 定时器, 序号和确认号的首部字段</li>
<li>全双工<h3 id="TCP连接"><a href="#TCP连接" class="headerlink" title="TCP连接"></a>TCP连接</h3></li>
<li>三次握手<ul>
<li>客户发送</li>
<li>服务端发送</li>
<li>客户发送</li>
</ul>
</li>
<li><p>MSS最大报文段长度(其实是应用层数据的最大长度): 根据 MTU(链路层)最大传输单元 确定, 典型值1460字节</p>
<h3 id="TCP报文段结构"><a href="#TCP报文段结构" class="headerlink" title="TCP报文段结构"></a>TCP报文段结构</h3><p>| 源端口号 | 目的端口号 | 序号 | 确认号 | (第一堆) | 接收窗口 | 因特网校验和-紧急数据指针 | 选项 | 数据 |<br>|-|-|-|-|-|-|-|-|-|<br>| 16bit | 16bit | 32bit | 32bit | 16bit | 16bit | 16bit+16bit | 0bit+ | … |</p>
</li>
<li><p>第一堆里面有: 首部长度4bit(以字为单位, 1=4字节) + 保留未用6bit + (URG ACK PSHRST SYN FIN)标志字段6bit</p>
</li>
<li>SYN FIN RST 用于连接建立和拆除, PSH代表必须立即将数据交给上层, URG与紧急数据指表示指向位置是紧急数据的最后一个字节, 需要通知上层</li>
<li>序号和确认号<ul>
<li>序号: 是该报文段的首字节的字节流编号<blockquote>
<p>单纯的ACK不包含数据字节, 因此不引发编号增加</p>
</blockquote>
</li>
<li>确认号: 表示这一序号之前的字节均被正确接收, 它和其后的未接收<blockquote>
<p>一个报文可以同时有确认号和序号, 是捎带ACK</p>
</blockquote>
<h3 id="往返时间的估计与超时"><a href="#往返时间的估计与超时" class="headerlink" title="往返时间的估计与超时"></a>往返时间的估计与超时</h3></li>
</ul>
</li>
<li>估计往返时间<ul>
<li>SampleRTT: 某一报文被发出(交给IP)到其确认被接收的时间量(一个来回)<blockquote>
<p>重传的报文不进行测量</p>
</blockquote>
</li>
<li>EstimatedRTT: 初始为第一个测得的SampleRTT, 之后根据下式更新<br>$$\textrm{EstimatedRTT} = (1-\alpha)\cdot\textrm{EstimatedRTT} + \alpha \cdot \textrm{SampleRTT}$$<blockquote>
<p>指数移动加权平均</p>
</blockquote>
</li>
<li>DevRTT: RTT的偏差, 是Sample和Estimated的差的绝对值, 也用指数移动加权平均<br>$$\textrm{DevRTT} = (1-\beta)\cdot\textrm{DevRTT} + \beta \cdot |\textrm{SampleRTT}-\textrm{EstimatedRTT}|$$</li>
</ul>
</li>
<li>设置和管理重传超时间隔<ul>
<li>重传间隔<ul>
<li>默认初始值为1s</li>
<li>超时后, 设为先前值的2倍</li>
<li>若有新的EstimatedRTT, 立刻据下式更新<br>$$\textrm{TimeInterval} = \textrm{EstimatedRTT} + 4\cdot \textrm{DevRTT}$$</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="可靠数据传输"><a href="#可靠数据传输" class="headerlink" title="可靠数据传输"></a>可靠数据传输</h3><ul>
<li>累积ACK<ul>
<li>ACK中的数字, 表示其之前的字节均被接收</li>
</ul>
</li>
<li>重传<ul>
<li>规则: 一个报文到达重传间隔, 仍未收到ACK(ACK&gt;SEQ+LEN), 则重传</li>
<li>超时间隔加倍: 重传过后, 下一次的定时将会加倍; </li>
<li>推算超时间隔: 若收到ACK或得到上层应用数据, 则又改为使用$\textrm{TimeInterval}$计算</li>
</ul>
</li>
<li>快速重传<ul>
<li>ACK生成策略<ul>
<li>延迟ACK: 某一报文到达, 等待500ms, 若下一个按序报文没到, 发这一报文ACK</li>
<li>立刻发送累积ACK: 一个按序报文到了, 前一个在等待发ACK, 发累积ACK, ACK后一个报文</li>
<li>冗余ACK: 到达一个报文, 其序号大于期望的序号, 立刻发送冗余ACK, 其序号为期望序号</li>
<li>收到的报文填补空缺, 且起始于空缺的低端, 则立刻发ACK</li>
</ul>
</li>
<li>收到3个冗余ACK, 则进行快速重传, 假定被ACK的报文后的报文全部丢失</li>
</ul>
</li>
<li>回退N步还是选择重传<ul>
<li>第n个报文重传, 若之后的报文被缓存, 且其ACK及时到达, 那么后续可以不用重传<blockquote>
<p>这意味着TCP不是单纯的GBN, 而含有一部分SN</p>
</blockquote>
<h3 id="流量控制-1"><a href="#流量控制-1" class="headerlink" title="流量控制"></a>流量控制</h3></li>
</ul>
</li>
<li>接收窗口<ul>
<li>接收方跟踪<ul>
<li>应用读取的最后一个字节的编号: LastByteRead</li>
<li>接收到的最后一个字节的编号: LastByteRcvd</li>
<li>接收缓存大小: RcvBuffer</li>
<li>接收窗口大小: rwnd = RcvBuffer-(LastByteRcvd-LastByteRead)<blockquote>
<p>也就是缓存余量</p>
</blockquote>
</li>
<li>接收方将rwnd放入发给发送方的报文中</li>
</ul>
</li>
<li>发送方跟踪<ul>
<li>发送的最后一个字节的编号: LastByteSent</li>
<li>被确认的最后一个字节的编号: LastByteAcked</li>
<li>从接收到的报文中得到的rwnd</li>
<li>需要始终保证 LastByteSent - LastByteAcked &lt;= rwnd</li>
<li>若出现rwnd=0, 则需要继续发送含有一字节数据的报文<blockquote>
<p>为了防止接收方无数据要发, 引发发送端阻塞. 这个一字节的报文总会被ACK, 有机会获得一个非0的rwnd值</p>
</blockquote>
<h3 id="TCP连接管理"><a href="#TCP连接管理" class="headerlink" title="TCP连接管理"></a>TCP连接管理</h3></li>
</ul>
</li>
</ul>
</li>
<li><p>建立: 三次握手</p>
<p>| 通信 | SYN | ACK | SEQ | 操作 |<br>|-|-|-|-|-|<br>| 客户-&gt;服务 | + |  | client_isn | 客户端随机选择起始序号 |<br>| 服务-&gt;客户 |  | client_isn+1 | server_isn | 服务器分配资源, 随机选择起始序号 |<br>| 客户-&gt;服务 |  | server_isn+1 | client_isn+1 | 客户端分配资源 |</p>
</li>
<li>终止(以客户终止为例)<ul>
<li>客户发送FIN(设置首部FIN标志位1)</li>
<li>服务器ACK这个FIN</li>
<li>服务器发送FIN, 并立刻关闭, 释放资源</li>
<li>客户端ACK这个FIN, 定时等待之后关闭, 释放资源</li>
</ul>
</li>
<li>防范SYN洪泛攻击<ul>
<li>第一步的isn使用散列函数, 用源地址, 目的地址和端口号, 和一个只有服务器知道的散列函数</li>
<li>第二步不分配资源</li>
<li>第三步根据ACK里面的seq, 可以验证这个ACK是由先前的某个SYN生成的, 于是分配资源建立连接</li>
</ul>
</li>
<li>拒绝通信<ul>
<li>发送RST(RST标志位1)</li>
</ul>
</li>
</ul>
<h2 id="拥塞控制原理"><a href="#拥塞控制原理" class="headerlink" title="拥塞控制原理"></a>拥塞控制原理</h2><ul>
<li>一堆废话, 我只关心TCP</li>
</ul>
<h2 id="TCP拥塞控制"><a href="#TCP拥塞控制" class="headerlink" title="TCP拥塞控制"></a>TCP拥塞控制</h2><ul>
<li>拥塞窗口cwnd<ul>
<li>对发送进行限制: LastByteSent - LastByteAcked &lt;= min(rwnd, cwnd)</li>
</ul>
</li>
<li>窗口与速率的关系: B = S(发出的包数量)/RTT(往返时间)</li>
<li>TCP拥塞控制算法<ul>
<li>慢启动<ul>
<li>初始: cwnd = 1 (MSS)</li>
<li>加倍: 每一轮, cwnd加倍</li>
<li>结束<ul>
<li>超时, 取cwnd = 1, ssthresh = cwnd/2</li>
<li>到达ssthresh, 进入拥塞避免模式</li>
<li>3个冗余ACK, cwnd = cwnd/2+3, 进入快速恢复</li>
</ul>
</li>
</ul>
</li>
<li>拥塞避免<ul>
<li>线性增加: 每一轮, cwnd+1</li>
<li>结束<ul>
<li>超时, 取cwnd = 1, ssthresh = cwnd/2, 相当于慢启动</li>
<li>3个冗余ACK, cwnd = cwnd/2+3, 进入快速恢复</li>
</ul>
</li>
</ul>
</li>
<li>快速恢复<ul>
<li>接下来收到的冗余ACK, cwnd都加1(之前的3个冗余ACK已经加过3, 至少加3)</li>
<li>结束: 收到期待的ACK, 将cwnd设置为ssthresh, 进入拥塞避免</li>
</ul>
</li>
<li>TCP拥塞控制: 回顾<ul>
<li>TCP Tahoe: 没有快速恢复, 3个ACK也进入慢启动</li>
<li>TCP Reno: 上文的方案</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="公平性"><a href="#公平性" class="headerlink" title="公平性"></a>公平性</h3><ul>
<li>TCP AIMD<ul>
<li>相同的RTT: 公平, 最终会达到平均分配带宽</li>
<li>RTT不同: RTT小的更快扩大窗口, 将得到更多带宽, 最终似乎与RTT成反比</li>
</ul>
</li>
<li>UDP参与<ul>
<li>UDP没有公平可言, 抢占资源</li>
<li>UDP将挤压TCP资源</li>
</ul>
</li>
<li>并行TCP<ul>
<li>一个应用使用多个TCP连接, 就获得了多倍其应得的带宽<h3 id="网络辅助拥塞控制"><a href="#网络辅助拥塞控制" class="headerlink" title="网络辅助拥塞控制"></a>网络辅助拥塞控制</h3></li>
<li>IP首部设置ECN(2比特, 4状态), 送到接收主机</li>
<li>接受主机在TCP ACK中设置ECE, 发到发送主机</li>
<li>发送主机减半cwnd, 并在下一个报文头中设置CWD, 发到接收主机</li>
</ul>
</li>
</ul>
<h1 id="Chapter-4-Internetworking"><a href="#Chapter-4-Internetworking" class="headerlink" title="Chapter 4. Internetworking"></a>Chapter 4. Internetworking</h1><blockquote>
<p>[Textbook] 4.3, 5.3, 5.4, 5.5, 5.6</p>
</blockquote>
<h1 id="Chapter-5-End-to-End-Protocols"><a href="#Chapter-5-End-to-End-Protocols" class="headerlink" title="Chapter 5. End-to-End Protocols"></a>Chapter 5. End-to-End Protocols</h1><blockquote>
<p>[Textbook] 3.1, 3.2, 3.3, 3.4, 3.5, 9.x </p>
</blockquote>
<h1 id="Chapter-6-Congestion-Control-and-QoS"><a href="#Chapter-6-Congestion-Control-and-QoS" class="headerlink" title="Chapter 6. Congestion Control and QoS"></a>Chapter 6. Congestion Control and QoS</h1><blockquote>
<p>[Textbook] 3.6, 3.7</p>
</blockquote>
<h1 id="Chapter-7-Network-Security"><a href="#Chapter-7-Network-Security" class="headerlink" title="Chapter 7. Network Security"></a>Chapter 7. Network Security</h1><blockquote>
<p>[Textbook] 8.x</p>
</blockquote>
<h1 id="Chapter-8-Internet-Applications"><a href="#Chapter-8-Internet-Applications" class="headerlink" title="Chapter 8. Internet Applications"></a>Chapter 8. Internet Applications</h1><blockquote>
<p>[Textbook] 2.x</p>
</blockquote>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2019-12-22T12:06:08.777Z" itemprop="dateUpdated">2019-12-22 20:06:08</time>
</span><br>


        
        Link：<a href="/2019/09/04/Learn-CN-20190904-CN-ALL/" target="_blank" rel="external">https://Maxwell-lyu.github.io/2019/09/04/Learn-CN-20190904-CN-ALL/</a>
        
    </div>
    
    <footer>
        <a href="https://Maxwell-lyu.github.io">
            <img src="/img/avatar.png" alt="Maxwell Lyu">
            Maxwell Lyu
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">
        <i class="icon icon-coffee"></i>
    </a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Computer-Network/">Computer Network</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Course/">Course</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://Maxwell-lyu.github.io/2019/09/04/Learn-CN-20190904-CN-ALL/&title=《CN-ALL》 — Maxwell's Blog&pic=https://Maxwell-lyu.github.io/img/avatar.png" data-title="Weibo">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="WeChat">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://Maxwell-lyu.github.io/2019/09/04/Learn-CN-20190904-CN-ALL/&title=《CN-ALL》 — Maxwell's Blog&source=[Textbook]: Computer Networking: A Top-Down Approach(7th Edition) by James F...." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://Maxwell-lyu.github.io/2019/09/04/Learn-CN-20190904-CN-ALL/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《CN-ALL》 — Maxwell's Blog&url=https://Maxwell-lyu.github.io/2019/09/04/Learn-CN-20190904-CN-ALL/&via=https://Maxwell-lyu.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://Maxwell-lyu.github.io/2019/09/04/Learn-CN-20190904-CN-ALL/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2019/09/04/Learn-CM-20190904-CM-ALL/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">CM-ALL</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2019/09/02/Learn-DB-20190902-DB-ALL/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">DB-ALL</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'false' == 'true',
            appId: "mVhn5w80vLd48Du7XTGLVw71-9Nh9j0Va",
            appKey: "mpnUAHaby8utnEkqWK354Q3w",
            avatar: "mm",
            placeholder: "Empty here...",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10", 
            lang:'en' 
        })
    </script>
    <!-- Valine Comments end -->







</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        Buy Maxwell a Coffee
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.png" data-alipay="/img/alipay.png">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">Wechat</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">Alipay</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        Total Visitors：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        Total Visits：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Maxwell Lyu &copy; 2019</span>
            <span>
                
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://Maxwell-lyu.github.io/2019/09/04/Learn-CN-20190904-CN-ALL/&title=《CN-ALL》 — Maxwell's Blog&pic=https://Maxwell-lyu.github.io/img/avatar.png" data-title="Weibo">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="WeChat">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://Maxwell-lyu.github.io/2019/09/04/Learn-CN-20190904-CN-ALL/&title=《CN-ALL》 — Maxwell's Blog&source=[Textbook]: Computer Networking: A Top-Down Approach(7th Edition) by James F...." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://Maxwell-lyu.github.io/2019/09/04/Learn-CN-20190904-CN-ALL/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《CN-ALL》 — Maxwell's Blog&url=https://Maxwell-lyu.github.io/2019/09/04/Learn-CN-20190904-CN-ALL/&via=https://Maxwell-lyu.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://Maxwell-lyu.github.io/2019/09/04/Learn-CN-20190904-CN-ALL/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://Maxwell-lyu.github.io/2019/09/04/Learn-CN-20190904-CN-ALL/" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>




<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '_(:з」∠)_';
            clearTimeout(titleTime);
        } else {
            document.title = 'ヾ(^▽^*)';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->



</body>
</html>
